<div class="modal-wrapper">
  <kendo-dialog
  *ngIf="openIMState"
  (close)="closeInterventionModal($event)"
  id="interventionHistoryTable"
  class="intervention-modal"
  >
    <kendo-dialog-titlebar class="justify-content-between">
      <h5 class="fs-1rem fw-semibold mb-0">Well Intervention History | MN-0040-LS</h5>
    </kendo-dialog-titlebar>
    <intervention-history-table></intervention-history-table>
  </kendo-dialog>
</div>

<div class="d-flex w-100 gap-3">
  <!-- Main Dashboard Content -->
  <div
    class="d-flex flex-column gap-3"
    [ngClass]="{
      'col-10': isShowSmartAlarmPanel,
      'col-12': !isShowSmartAlarmPanel
    }"
  >
    <!-- Well Information Container -->
    <div class="w-100">
      <static-noise-background-card>
        <kendo-expansionpanel
          class="rounded rounded-4 w-100"
          [expanded]="isExpanded"
          id="wellInfoContainer"
        >
          <!-- Header Section -->
          <ng-template kendoExpansionPanelTitleDirective>
            <div class="header-expanded w-100">
              <div class="d-flex w-100 gap-5">
                <div class="d-flex col-7 justify-content-between align-items-center">
                  <h5 class="fs-1rem fw-semibold mb-0">Well Information</h5>
                  <button
                      kendoButton
                      fillMode="outline"
                      class="py-1 px-3 fs-0_875rem border border-1 rounded-pill text-primary" 
                      (click)="openInterventionModal($event)">
                      Intervention History
                      <i class="ms-2 bi bi-arrow-right"></i>
                  </button>
                </div>
                <div class="border-dim-gray border-end"></div>
                <div class="d-flex flex-grow-1 justify-content-between align-items-center">
                  <h5 class="fs-1rem fw-semibold mb-0">Well Model</h5>
                  <button
                      kendoButton
                      fillMode="outline"
                      class="py-1 px-3 fs-0_875rem border border-1 rounded-pill text-primary" 
                      (click)="openManagementModal($event)">
                      Model Management
                      <i class="ms-2 bi bi-arrow-right"></i>
                  </button>
                </div>
                <button
                  kendoButton
                  fillMode="clear"
                  class="hyperlink-btn fw-semibold fs-0_875rem"
                  (click)="togglePanel()"
                >
                  {{ isExpanded ? 'Hide Details' : 'Show Details' }}
                </button>
              </div>
            </div>
          </ng-template>

          <!-- Body Section -->
          <div class="body-content d-flex w-100 gap-5">
            <div class="d-flex col-7 justify-content-between">
              <div>
                <span class="fs-0_75rem fw-light">Well Type</span>
                <h6 class="fw-semibold">Oil Producer</h6>
              </div>
              <div>
                <span class="fs-0_75rem fw-light">Lift Type</span>
                <h6 class="fw-semibold">Gas Lift</h6>
              </div>
              <div>
                <span class="fs-0_75rem fw-light">Trajectory</span>
                <h6 class="fw-semibold">Vertical</h6>
              </div>
              <div>
                <span class="fs-0_75rem fw-light">Producing Reservoir</span>
                <div class="fw-semibold d-flex align-items-start">
                  Kharaib-2
                  <span kendoTooltip class="d-flex align-items-end" position="bottom">
                    <button kendoButton fillMode="clear" title="Since 2024-07-14" class="p-0 ms-3">
                      <img src="assets/icons/hexagon-info.svg" alt="hexagon-info-icon" class="w-1_25rem" />
                    </button>
                  </span> 
                </div>
              </div>
              <div>
                <span class="fs-0_75rem fw-light">Producing Sector</span>
                <h6 class="fw-semibold">Region 4</h6>
              </div>
            </div>
            <div class="border-dim-gray border-end"></div>
            <div class="d-flex flex-grow-1 justify-content-between">
              <div class="col-5">
                <h6 class="fs-0_75rem fw-light">Model Validity</h6>
                <span class="fw-semibold">Matched</span>
              </div>
              <div class="flex-grow-1">
                <h6 class="fs-0_75rem fw-light">Version Date</h6>
                <span class="fw-semibold">2024-07-14</span>
              </div>
            </div>            
          </div>
        </kendo-expansionpanel>
      </static-noise-background-card>
    </div>  

    <!-- Third Row Cards -->
    <div class="d-flex w-100 gap-3">
      <!-- Left Column -->
      <div class="col-3 d-flex flex-column gap-3">
        <!-- First Row Left -->
        <div class="height-16_25rem">
          <static-noise-background-card>
            <!-- Card Content -->
            <static-producer-well class="w-100 p-4"></static-producer-well>
          </static-noise-background-card>
        </div>
        <!-- Second Row Left -->
        <div class="height-16_25rem">
          <!-- Second Row Left Content -->
          <static-noise-background-card>
            <!-- Card Content -->
          </static-noise-background-card>
        </div>
      </div>

      <!-- Right Column -->
      <div
        class="flex-grow-1 height-33_5rem"
      >
        <static-noise-background-card></static-noise-background-card>
      </div>
    </div>

    <!-- Fourth Row Cards -->
    <div class="d-flex w-100 gap-3">
      <div
        class="col-6 height-19_625rem"
      >
        <static-noise-background-card class="transparent-overlay">
          <!-- Card Content Here -->
          <static-top-opportunities class="w-100 z-0"></static-top-opportunities>
        </static-noise-background-card>
      </div>
      <div
        class="flex-grow-1 height-19_625rem"
      >
        <static-noise-background-card class="transparent-overlay">
          <!-- Card Content Here -->
          <static-top-underperform class="w-100 z-0"></static-top-underperform>
        </static-noise-background-card>
      </div>
    </div>
  </div>

  <!-- Smart Ticket & Alarm Panels -->
  <div
    class="w-100"
    [ngClass]="{
      'd-flex': isShowSmartAlarmPanel,
      'd-none': !isShowSmartAlarmPanel
    }"
  >
    <div class="w-100 rounded-4 smart-alarm-panel">
      <static-noise-background-card class="transparent-overlay">
        <static-notification-panel class="w-100"></static-notification-panel>
      </static-noise-background-card>
    </div>
  </div>
</div>
